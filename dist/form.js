const r={fname:"",lname:"",mname:"",dob:"",ssn:"",address:"",city:"",state:"",zip:"",email:"",marital:"",residency:"",employed:"",sex:"",disabled:"",numinhouse:"",EmerContactName:"",EmerContactPhone1:""},m={patwages:"",patdisab:"",patunemploy:""},i={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:""},h=document.querySelector('[cd="submit-data"]');let f=0,l="";const w="https://www.medserviceswebpap.com/api/patient/createpatient",b="https://www.medserviceswebpap.com/api/physician/createphysician",v="https://www.medserviceswebpap.com/auth/token?hcpid=89",E={grant_type:"password",username:"apiuser",password:"123456"};async function g(e,t){const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});if(!o.ok)throw new Error(o.statusText);return o.json()}async function k(e,t){try{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(t)});if(!o.ok)throw new Error("Network response was not ok");await o.json()}catch(o){console.log(o)}}async function S(e,t){try{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(t)});if(!o.ok)throw new Error("Network response was not ok");f=(await o.json()).Id}catch(o){console.log(o)}}async function A(e,t){try{if(!(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(t)})).ok)throw new Error("Network response was not ok")}catch(o){console.log(o)}}h.addEventListener("click",()=>{patientAddress&&patientAddress.forEach(e=>{switch(e.types[0]){case"street_number":{r.address=`${e.long_name} `;break}case"route":{r.address+=e.short_name;break}case"locality":r.city=e.long_name;break;case"administrative_area_level_1":{r.state=e.short_name;break}}}),doctorAddress&&doctorAddress.forEach(e=>{switch(e.types[0]){case"street_number":{i.address=`${e.long_name} `;break}case"route":{i.address+=e.short_name;break}case"locality":i.city=e.long_name;break;case"administrative_area_level_1":{i.state=e.short_name;break}}}),all_data.forEach(e=>{if(e.field==="patwages"||e.field==="patdisab"||e.field==="patunemploy"){m[e.field]=e.value;return}if(e.field.includes("doc-")){let t=e.field.split("-")[1];i[t]=e.value;return}if(e.field==="month"){r.dob=`${e.value}`;return}if(e.field==="day"||e.field==="year"){r.dob=`${r.dob}/${e.value}`;return}if(e.field==="residency"||e.field==="disabled"){r[e.field]=e.value==="Yes"?"true":"false";return}if(e.field==="ssn"){r[e.field]=e.value.replace(/-/g,"");return}r[e.field]=e.value}),g(v,E).then(e=>{l=e.access_token,S(w,r).then(()=>{let t=`https://www.medserviceswebpap.com/api/patient/updatepatientincome?patientId=${f}`;A(t,m)}),k(b,i)})});function L(){document.querySelectorAll("[cd=drug]").forEach(t=>{const o=document.createElement("option"),s=t.textContent;s!==null&&(o.text=s,o.value=s,o.setAttribute("cd",s),y.add(o))})}const y=document.getElementById("Medication-Name-9"),u=document.getElementById("med-strength-2");y.addEventListener("change",e=>{var n;const t=e.target.value.replace(" ","-").toLocaleLowerCase(),o=(n=document.querySelector(`[cd-name=${t}]`))==null?void 0:n.parentElement,s=o==null?void 0:o.querySelectorAll("[cd=strength]");s==null||s.forEach(d=>{const c=document.createElement("option"),a=d.textContent;a!==null&&(c.text=a,c.value=a,u==null||u.add(c))})});window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsload",e=>{console.log("cmsload Successfully loaded!");const[t]=e;L(),t.on("renderitems",o=>{console.log(o)})}]);function _(e,t,o,s){let n=0;const d=e.length;e.forEach((c,a)=>{a!==n&&(c.style.display="none")}),s.forEach((c,a)=>{a!==n?c.classList.remove("current"):c.classList.add("current")}),t.addEventListener("click",()=>{n>0&&(e[n].style.display="none",n--,e[n].style.display="block")}),o.addEventListener("click",()=>{n<d-1&&(e[n].style.display="none",n++,e[n].style.display="block")})}const q=document.querySelectorAll("[cd-form = step]"),T=document.querySelector("[cd-form = button-back]"),x=document.querySelector("[cd-form = button-next]"),N=document.querySelectorAll("[cd-form=progress-indicator]");_(q,T,x,N);const p=document.querySelectorAll(".step-text-c"),I=document.querySelector(".progress-bar"),$={attributes:!0};function O(e){e.forEach(function(t){if(t.type==="attributes"&&t.attributeName==="class"){let o=Array.from(p).findIndex(s=>s.classList.contains("current"));I.style.width=`${(o+1)/p.length*100}%`}})}let D=new MutationObserver(O);p.forEach(e=>{D.observe(e,$)});const B=document.querySelectorAll(".doc-content-c-tab"),C=document.querySelectorAll(".doc-content-w"),j=document.querySelectorAll(".tab-minus-icon"),P=document.querySelectorAll(".tab-plus-icon");B.forEach(e=>{e.addEventListener("click",()=>{C.forEach(t=>{t.classList.remove("active"),t.parentElement===e&&t.classList.add("active")}),j.forEach(t=>{t.classList.remove("active"),e.querySelector(".tab-minus-icon")===t&&t.classList.add("active")}),P.forEach(t=>{t.classList.remove("active"),e.querySelector(".tab-plus-icon")!==t&&t.classList.add("active")})})});
