const u={fname:"",lname:"",mname:"",dob:"",ssn:"",address:"",city:"",state:"",zip:"",email:"",marital:"",residency:"",employed:"",sex:"",disabled:"",numinhouse:"",EmerContactName:"",EmerContactPhone1:""},L={patwages:"",patdisab:"",patunemploy:""},p={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:"",id:""},h={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:"",id:""},A=document.querySelector('[cd="submit-data"]');let N=0,E="";const $="https://www.medserviceswebpap.com/api/patient/createpatient",x="https://www.medserviceswebpap.com/api/physician/createphysician",T="https://www.medserviceswebpap.com/auth/token?hcpid=89",C={grant_type:"password",username:"apiuser",password:"123456"};async function P(t,e){const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});if(!n.ok)throw new Error(n.statusText);return n.json()}async function I(t,e){try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");const s=await n.json();e.id=s.Id,console.log(e)}catch(n){console.log(n)}}async function _(t,e){try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");N=(await n.json()).Id}catch(n){console.log(n)}}async function O(t,e){try{if(!(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(e)})).ok)throw new Error("Network response was not ok")}catch(n){console.log(n)}}A.addEventListener("click",()=>{patientAddress&&patientAddress.forEach(e=>{switch(e.types[0]){case"street_number":{u.address=`${e.long_name} `;break}case"route":{u.address+=e.short_name;break}case"locality":u.city=e.long_name;break;case"administrative_area_level_1":{u.state=e.short_name;break}}}),doctorAddress&&doctorAddress.forEach(e=>{switch(e.types[0]){case"street_number":{p.address=`${e.long_name} `;break}case"route":{p.address+=e.short_name;break}case"locality":p.city=e.long_name;break;case"administrative_area_level_1":{p.state=e.short_name;break}}}),doctor2Address&&doctor2Address.forEach(e=>{switch(e.types[0]){case"street_number":{h.address=`${e.long_name} `;break}case"route":{h.address+=e.short_name;break}case"locality":h.city=e.long_name;break;case"administrative_area_level_1":{h.state=e.short_name;break}}});const t=[];document.querySelectorAll(".input-field").forEach(e=>{let n=e.id,s=e.value;n.includes("phone")&&(s=s.replace(/\D/g,"")),t.push({field:n,value:s})}),document.querySelectorAll("input[type=radio]:checked").forEach(e=>{let n=e.name,s=e.id;t.push({field:n,value:s})}),t.forEach(e=>{if(e.field==="patwages"){L[e.field]=e.value.slice(1);return}if(e.field.includes("doc-")){let n=e.field.split("-")[1];p[n]=e.value;return}if(e.field.includes("doc2-")){let n=e.field.split("-")[1];h[n]=e.value;return}if(e.field==="month"){u.dob=`${e.value}`;return}if(e.field==="day"||e.field==="year"){u.dob=`${u.dob}/${e.value}`;return}if(e.field==="residency"||e.field==="disabled"){u[e.field]=e.value==="Yes"?"true":"false";return}if(e.field==="ssn"){u[e.field]=e.value.replace(/-/g,"");return}u[e.field]=e.value}),P(T,C).then(e=>{E=e.access_token,_($,u).then(()=>{let n=`https://www.medserviceswebpap.com/api/patient/updatepatientincome?patientId=${N}`;O(n,L)}).then(()=>{I(x,p),document.getElementById("doc2-fname").value!==""&&I(x,h)})})});window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsload",t=>{const[e]=t;for(let n=1;n<4;n++)ae(document.getElementById(`med-name-${n}`));e.on("renderitems",n=>{console.log(n)})}]);const z=document.getElementById("year"),D=105;for(let t=D;t>0;t--){const e=document.createElement("option");e.text=`${t+1900}`,e.value=`${t+1900}`,z.add(e)}function R(t,e,n,s){let i=0;e.style.display="none";const o=t.length;t.forEach((r,l)=>{l!==i&&(r.style.display="none")}),e.addEventListener("click",()=>{i>0&&(t[i].style.display="none",i--,t[i].style.display="block"),s.forEach((r,l)=>{l!==i?r.classList.remove("current"):r.classList.add("current")}),i===0?e.style.display="none":e.style.display="block"}),n.addEventListener("click",()=>{if(i===o){document.querySelector(".payment-trigger").click(),document.querySelector(".submit-btn").click();return}const r=t[i].querySelectorAll("input"),l=t[i].querySelectorAll("select");if(V(r,l,i))i<o-1&&(t[i].style.display="none",i++,t[i].style.display="block"),s.forEach((a,d)=>{d!==i?a.classList.remove("current"):a.classList.add("current")}),i===0?e.style.display="none":e.style.display="block",i===o&&(n.innerHTML="Continue To Payment");else return})}const M=document.querySelectorAll("[cd-form = step]"),j=document.querySelector("[cd-form = button-back]"),F=document.querySelector("[cd-form = button-next]"),b=document.querySelectorAll("[cd-form=progress-indicator]");R(M,j,F,b);function V(t,e,n){let s=!0;t.forEach(a=>{a.required&&(a.value===""?(s=!1,a.nextElementSibling.classList.add("active")):a.nextElementSibling.classList.remove("active"))}),e.forEach(a=>{a.required&&(a.value===""?(s=!1,a.nextElementSibling.classList.add("active")):a.nextElementSibling.classList.remove("active"))});const i=document.querySelectorAll("input[name=sex]:checked"),o=document.querySelectorAll("input[name=residency]:checked"),r=document.querySelectorAll("input[name=disabled]:checked");if(i.length===0?(document.getElementById("sex-radio-error").classList.add("active"),s=!1):document.getElementById("sex-radio-error").classList.remove("active"),o.length===0?(document.getElementById("citizen-radio-error").classList.add("active"),s=!1):document.getElementById("citizen-radio-error").classList.remove("active"),r.length===0?(document.getElementById("disabled-radio-error").classList.add("active"),s=!1):document.getElementById("disabled-radio-error").classList.remove("active"),document.getElementById("ssn").value.length!==11?(s=!1,document.getElementById("ssn-error").classList.add("active")):document.getElementById("ssn-error").classList.remove("active"),n===1){const a=document.getElementById("email");if(!a.required)return;/\S+@\S+\.\S+/.test(a.value)?a.nextElementSibling.classList.remove("active"):(s=!1,a.nextElementSibling.classList.add("active"));const c=document.getElementById("dayphone"),m=document.getElementById("EmerContactPhone");c.value.length!==10?(s=!1,c.nextElementSibling.classList.add("active")):c.nextElementSibling.classList.remove("active"),m.value.length!==10?(s=!1,m.nextElementSibling.classList.add("active")):m.nextElementSibling.classList.remove("active");const f=document.getElementById("zip");f.value.length!==5?(s=!1,f.nextElementSibling.classList.add("active")):f.nextElementSibling.classList.remove("active")}if(n===2){const a=document.getElementById("doc-email"),d=document.getElementById("doc2-email-2");if(!a.required)return;const c=/\S+@\S+\.\S+/;c.test(a.value)?a.nextElementSibling.classList.remove("active"):(s=!1,a.nextElementSibling.classList.add("active")),d.value!==""?c.test(d.value)||(s=!1,d.nextElementSibling.classList.add("active")):d.nextElementSibling.classList.remove("active");const m=document.getElementById("doc-officephone-2"),f=document.getElementById("doc-fax"),g=document.getElementById("doc2-officephone-2"),v=document.getElementById("doc2-fax-2");m.value.length!==10?(s=!1,m.nextElementSibling.classList.add("active")):m.nextElementSibling.classList.remove("active"),f.value.length!==10?(s=!1,f.nextElementSibling.classList.add("active")):f.nextElementSibling.classList.remove("active"),g.value!==""&&(g.value.length!==10?(s=!1,g.nextElementSibling.classList.add("active")):g.nextElementSibling.classList.remove("active")),v.value!==""&&(v.value.length!==10?(s=!1,v.nextElementSibling.classList.add("active")):v.nextElementSibling.classList.remove("active"));const w=document.getElementById("doc-zip-2"),S=document.getElementById("doc2-zip-2");w.value.length!==5?(s=!1,w.nextElementSibling.classList.add("active")):w.nextElementSibling.classList.remove("active"),S.value!==""&&(S.value.length!==5?(s=!1,S.nextElementSibling.classList.add("active")):S.nextElementSibling.classList.remove("active"))}return s}const U=document.querySelectorAll(".phone-field"),J=document.querySelectorAll('input[placeholder="Zip code"]');function H(t){t.addEventListener("input",function(){const e=this.value.replace(/\D/g,"").substring(0,10),n=e.substring(0,3),s=e.substring(3,6),i=e.substring(6,10);e.length>6?this.value=`(${n}) ${s} - ${i}`:e.length>3?this.value=`(${n}) ${s}`:e.length>0&&(this.value=`(${n}`)})}U.forEach(t=>{H(t)});J.forEach(t=>{t.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value.length>5&&(this.value=this.value.slice(0,5))})});function X(t){return t.replace(/\D/g,"").replace(/^(\d{3})(\d{2})(\d{0,4})$/,(s,i,o,r)=>r?`${i}-${o}-${r}`:o?`${i}-${o}`:i)}const Q=document.getElementById("ssn");Q.addEventListener("input",function(){this.value=X(this.value)});const Y=document.querySelector(".money-field");Y.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value!==""&&(this.value="$"+this.value)});const G=document.querySelector(".progress-bar"),K={attributes:!0};function Z(t){t.forEach(function(e){if(e.type==="attributes"&&e.attributeName==="class"){let n=Array.from(b).findIndex(s=>s.classList.contains("current"));G.style.width=`${(n+1)/b.length*100}%`}})}let W=new MutationObserver(Z);b.forEach(t=>{W.observe(t,K)});const ee=document.querySelectorAll(".doc-content-c-tab"),te=document.querySelectorAll(".doc-content-w"),ne=document.querySelectorAll(".tab-minus-icon"),se=document.querySelectorAll(".tab-plus-icon");ee.forEach(t=>{t.addEventListener("click",()=>{te.forEach(e=>{e.classList.remove("active"),e.parentElement===t&&e.classList.add("active")}),ne.forEach(e=>{e.classList.remove("active"),t.querySelector(".tab-minus-icon")===e&&e.classList.add("active")}),se.forEach(e=>{e.classList.remove("active"),t.querySelector(".tab-plus-icon")!==e&&e.classList.add("active")})})});const y=document.getElementById("medicationStep"),ie=y==null?void 0:y.querySelector(".form-row-wrapper"),k=document.getElementById("addMed");k.addEventListener("click",()=>{var e,n;const t=ie.cloneNode(!0);y.insertBefore(t,k.parentElement),(e=t.querySelector(".flex-grow:nth-child(1) > select"))==null||e.removeAttribute("required"),(n=t.querySelector(".flex-grow:nth-child(4) > input"))==null||n.removeAttribute("required"),t.querySelector(".flex-grow:nth-child(4) > input").value="",t.querySelector(".flex-grow:nth-child(2) > select").id=`med-name-${y.childElementCount-1}`,t.querySelector(".flex-grow:nth-child(2) > select").value="",t.querySelector(".flex-grow:nth-child(3) > select").id=`med-strength-${y.childElementCount-1}`,t.querySelector(".flex-grow:nth-child(2) > select").addEventListener("change",s=>{var a;t.querySelector(".flex-grow:nth-child(3) > select").innerHTML="";const i=s.target.value.toLocaleLowerCase().split(" ").join("-"),o=(a=document.querySelector(`[cd-name=${i}]`))==null?void 0:a.parentElement,r=o==null?void 0:o.querySelectorAll("[cd=strength]"),l=[];r==null||r.forEach(d=>{const c=d.textContent;c!==null&&l.push(c)}),B(t.querySelector(".flex-grow:nth-child(3) > select"),l)})});for(let t=1;t<4;t++){const e=document.getElementById(`med-name-${t}`),n=document.getElementById(`med-strength-${t}`);e.addEventListener("change",s=>{var a;n.innerHTML="";const i=s.target.value.toLocaleLowerCase().replace(/[\(\)\/]/g,"").split(" ").join("-"),o=(a=document.querySelector(`[cd-name=${i}]`))==null?void 0:a.parentElement,r=o==null?void 0:o.querySelectorAll("[cd=strength]"),l=[];r==null||r.forEach(d=>{const c=d.textContent;c!==null&&l.push(c)}),B(n,l)})}function ae(t){document.querySelectorAll("[cd=drug]").forEach(n=>{const s=document.createElement("option"),i=n.textContent;i!==null&&(s.text=i,s.value=i,s.setAttribute("cd",i),t.add(s))})}function B(t,e){if(e.length>9){t.innerHTML="";const i=document.createElement("option");i.text="Select Medication First",i.value="",t.add(i);return}t.removeAttribute("disabled"),t.classList.remove("disabled"),t.innerHTML="";const n=document.createElement("option");n.text="Select Medication First",n.value="",t.add(n);let s=!0;e.forEach(i=>{if(i==="")return;s=!1;const o=document.createElement("option");o.text=i,o.value=i,t.add(o)}),s&&(t.setAttribute("disabled","true"),t.classList.add("disabled"),t.removeAttribute("required"))}(function(){window.AuthorizeNetIFrame||(window.AuthorizeNetIFrame={}),AuthorizeNetIFrame.onReceiveCommunication=function(e){var n=t(e);switch(n.action){case"resizeWindow":break;case"successfulSave":break;case"cancel":break;case"transactResponse":var s=JSON.parse(n.response);s.responseCode==="1"&&(document.querySelector(".thank-you-trigger").click(),A.click())}};function t(e){for(var n=[],s=e.split("&"),i,o=0;o<s.length;o++)i=s[o].split("="),n.push(i[0]),n[i[0]]=unescape(i[1]);return n}})();let q="";async function oe(t,e){try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");q=(await n.json()).token,document.querySelector("input[name=token]").value=q}catch(n){console.log(n)}}const re={getHostedPaymentPageRequest:{merchantAuthentication:{name:"9QRrX47T4DkY",transactionKey:"5GN3E8m559X9pdSf"},transactionRequest:{transactionType:"authCaptureTransaction",amount:"200.00"},hostedPaymentSettings:{setting:[{settingName:"hostedPaymentReturnOptions",settingValue:'{"showReceipt": false, "url": "https://www.transparentpricerx.com", "urlText": "Continue", "cancelUrl": "https://www.transparentpricerx.com", "cancelUrlText": "Cancel"}'},{settingName:"hostedPaymentButtonOptions",settingValue:'{"text": "Pay"}'},{settingName:"hostedPaymentStyleOptions",settingValue:'{"bgColor": "blue"}'},{settingName:"hostedPaymentPaymentOptions",settingValue:'{"cardCodeRequired": false, "showCreditCard": true, "showBankAccount": true}'},{settingName:"hostedPaymentSecurityOptions",settingValue:'{"captcha": false}'},{settingName:"hostedPaymentShippingAddressOptions",settingValue:'{"show": false, "required": false}'},{settingName:"hostedPaymentBillingAddressOptions",settingValue:'{"show": true, "required": true}'},{settingName:"hostedPaymentCustomerOptions",settingValue:'{"showEmail": true, "requiredEmail": true, "addPaymentProfile": true}'},{settingName:"hostedPaymentOrderOptions",settingValue:'{"show": false, "merchantName": "TrasnaparentPrice RX"}'},{settingName:"hostedPaymentIFrameCommunicatorUrl",settingValue:'{"url": "https://www.transparentpricerx.com/communicator"}'}]}}};oe("https://api.authorize.net/xml/v1/request.api",re);
