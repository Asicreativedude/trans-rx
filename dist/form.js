const C=["Enbrel","Vyvanse","Humira","Breo Ellipta","Trelegy","Ellipta","Xarelto","Wegovy","Ozempic","Skyrizi","HumaLOG","Dexcom","Xeljanz","Rybelsus","OCREVUS","Botox for migraines","Cosentyx","Jardiance","Multaq","Januvia","Suboxone","Janumet","Fasenra","Emgality","Qulipta","Prolia","Ribavirin","Sofosbuvir/velpatasvir EPCLUSA","Tresiba","Trintellix","Eliquis"],u={fname:"",lname:"",mname:"",dob:"",ssn:"",address:"",city:"",state:"",zip:"",email:"",marital:"",residency:"",employed:"",sex:"",disabled:"",numinhouse:"",EmerContactName:"",EmerContactPhone1:""},O={patwages:"",patdisab:"",patunemploy:""},m={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:"",id:""},y={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:"",id:""},M=document.querySelector('[cd="submit-data"]');let x=0,g="",N="";const R="https://www.medserviceswebpap.com/api/patient/createpatient",k="https://www.medserviceswebpap.com/api/physician/createphysician",j="https://www.medserviceswebpap.com/auth/token?hcpid=89",F={grant_type:"password",username:"apiuser",password:"123456"};async function H(n,e){const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});if(!t.ok)throw new Error(t.statusText);return t.json()}async function B(n,e){try{const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Network response was not ok");const s=await t.json();e.id=s.Id,console.log(e)}catch(t){Sentry.captureException(t),console.log(t)}}async function V(n,e){try{const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Network response was not ok");x=(await t.json()).Id}catch(t){Sentry.captureException(t),console.log(t)}}async function J(n,e){try{if(!(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(e)})).ok)throw new Error("Network response was not ok")}catch(t){Sentry.captureException(t),console.log(t)}}async function U(n,e){let t;e==="private"?t={privateins:"true"}:t={none:"true"};try{if(!(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(t)})).ok)throw new Error("Network response was not ok")}catch(s){Sentry.captureException(s),console.log(s)}}async function X(n){try{const e=await fetch(n,{method:"get",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}});if(!e.ok)throw new Error("Network response was not ok");let t=await e.json();return console.log(t),t}catch(e){Sentry.captureException(e),console.log(e)}}async function G(n){try{const e=await fetch("https://www.medserviceswebpap.com/api/paporders/additem",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(n)});if(!e.ok)throw new Error("Network response was not ok");let t=await e.json();return console.log(t),t}catch(e){Sentry.captureException(e),console.log(e)}}let b={CustomerId:"",OrderItems:[]};async function D(){function n(t){let s={ddi:"",name:"",program:"",pharmcoid:"6825",pharmco:"Rx Outreach",physicianid:"",qty:"90",sig:"",diagnosis:""};t.querySelectorAll(".input-field").forEach(i=>{if(i.name.includes("med-name")){let o="";i.querySelectorAll("option").forEach(c=>{c.value===i.value&&(o=c.getAttribute("cd-webpap-name"),s.program=c.getAttribute("cd-program"),c.getAttribute("cd-program")==="GSK Patient Assistance Program"?(s.pharmco="GlaxoSmithKline",s.pharmcoid="5331"):c.getAttribute("cd-program")==="myAbbvie Assist for Humira"?(s.pharmco="AbbVie Inc.",s.pharmcoid="203"):c.getAttribute("cd-program")==="Bristol-Myers Squibb Patient Assistance Foundation (BMSPAF)"?(s.pharmco="Bristol-Myers Squibb Company",s.pharmcoid="37"):c.getAttribute("cd-program")==="Help at Hand Patient Assistance Program"?(s.pharmco="Takeda Pharmaceuticals",s.pharmcoid="221"):c.getAttribute("cd-program")==="Sanofi Patient Connection"&&(s.pharmco="Sanofi",s.pharmcoid="90"),s.diagnosis=c.getAttribute("cd-diagnosis"),s.ddi===""&&(s.ddi=c.getAttribute("cd-webpap-id")))}),s.name=o}else if(i.name.includes("med-strength")){let o="";i.querySelectorAll("option").forEach(c=>{c.innerHTML===i.value&&(o=c.getAttribute("cd-webpap-id"))}),o!==""&&(s.ddi=o)}else i.name.includes("Frequency")?s.sig=i.value:i.name.includes("Doctor")&&(s.physicianid=i.value)}),b.OrderItems.push(s)}document.querySelectorAll('[cd="med"]').forEach(t=>{t.querySelector(".select-doc").value!==""&&n(t)})}M.addEventListener("click",()=>{z()});async function z(){patientAddress&&patientAddress.forEach(e=>{switch(e.types[0]){case"street_number":{u.address=`${e.long_name} `;break}case"route":{u.address+=e.short_name;break}case"locality":u.city=e.long_name;break;case"administrative_area_level_1":{u.state=e.short_name;break}}}),doctorAddress&&doctorAddress.forEach(e=>{switch(e.types[0]){case"street_number":{m.address=`${e.long_name} `;break}case"route":{m.address+=e.short_name;break}case"locality":m.city=e.long_name;break;case"administrative_area_level_1":{m.state=e.short_name;break}}}),doctor2Address&&doctor2Address.forEach(e=>{switch(e.types[0]){case"street_number":{y.address=`${e.long_name} `;break}case"route":{y.address+=e.short_name;break}case"locality":y.city=e.long_name;break;case"administrative_area_level_1":{y.state=e.short_name;break}}});const n=[];document.querySelectorAll(".input-field").forEach(e=>{let t=e.id,s=e.value;(t.includes("phone")||t.includes("fax"))&&(s=s.replace(/\D/g,"")),n.push({field:t,value:s})}),document.querySelectorAll("input[type=radio]:checked").forEach(e=>{let t=e.name,s=e.id;n.push({field:t,value:s})}),n.forEach(e=>{if(e.field==="insurance-field"){N=e.value;return}if(e.field==="patwages"){O[e.field]=e.value.slice(1);return}if(e.field.includes("doc-")){let t=e.field.split("-")[1];m[t]=e.value;return}if(e.field.includes("doc2-")){let t=e.field.split("-")[1];y[t]=e.value;return}if(e.field==="month"){u.dob=`${e.value}`;return}if(e.field==="day"||e.field==="year"){u.dob=`${u.dob}/${e.value}`;return}if(e.field==="residency"||e.field==="disabled"){u[e.field]=e.value==="Yes"?"true":"false";return}if(e.field==="ssn"){u[e.field]=e.value.replace(/-/g,"");return}u[e.field]=e.value}),await W().then(()=>{window.location.replace("https://www.transparentpricerx.com/thank-you")})}async function W(){return new Promise(async(n,e)=>{try{await H(j,F).then(t=>{g=t.access_token}).then(async()=>{await V(R,u);let t=`https://www.medserviceswebpap.com/api/patient/updatepatientincome?patientId=${x}`;await J(t,O),b.CustomerId=`${x}`;let s=`https://www.medserviceswebpap.com/api/patient/updatepatientinsurance?patientId=${x}`;await U(s,N),await B(k,m),document.getElementById("doc2-fname").value!==""&&await B(k,y),await D(),await Promise.all(b.OrderItems.map(async a=>{console.log(a.pharmco),await X(`https://www.medserviceswebpap.com/api/physician/getphysician?fname=${m.fname}&lname=${m.lname}`),a.physicianid.includes(m.fname)&&a.physicianid.includes(m.lname)&&(a.physicianid=m.id)})).then(()=>{console.log(b)}),await G(b)}),n()}catch(t){e(t)}})}function K(){const n=document.getElementById("segment-field");for(let e=1;e<4;e++){const s=document.getElementById(`med-name-${e}`).value;if(s==="")return;if(s!==C.find(a=>a===s)){if(n.value==="Brand"){n.value="Both";return}n.value="Generic";return}else{if(n.value==="Generic"){n.value="Both";return}n.value="Brand"}}}const Q=document.getElementById("year"),Y=105;for(let n=Y;n>0;n--){const e=document.createElement("option");e.text=`${n+1900}`,e.value=`${n+1900}`,Q.add(e)}function Z(n,e,t,s){let a=0;e.style.display="none";const i=n.length;n.forEach((o,c)=>{c!==a&&(o.style.display="none")}),e.addEventListener("click",()=>{a>0&&(n[a].style.display="none",a--,n[a].style.display="block"),s.forEach((o,c)=>{c!==a?o.classList.remove("current"):o.classList.add("current")}),a===0?e.style.display="none":e.style.display="block",a===3&&(t.innerHTML="Continue")}),t.addEventListener("click",()=>{const o=n[a].querySelectorAll("input"),c=n[a].querySelectorAll("select");if(se(o,c,a))if(a===3){K(),document.querySelector(".payment-trigger").click(),document.querySelector(".submit-btn").click();return}else a<i-1&&(n[a].style.display="none",a++,n[a].style.display="block"),s.forEach((r,l)=>{l!==a?r.classList.remove("current"):r.classList.add("current")}),a===0?e.style.display="none":e.style.display="block",a===3&&(t.innerHTML="Continue To Payment")})}const ee=document.querySelectorAll("[cd-form = step]"),te=document.querySelector("[cd-form = button-back]"),ne=document.querySelector("[cd-form = button-next]"),A=document.querySelectorAll("[cd-form=progress-indicator]");Z(ee,te,ne,A);function se(n,e,t){let s=!0;n.forEach(r=>{r.required&&(r.value===""?(s=!1,r.nextElementSibling.classList.add("active")):r.nextElementSibling.classList.remove("active"))}),e.forEach(r=>{r.required&&(r.value===""?(s=!1,r.nextElementSibling.classList.add("active")):r.nextElementSibling.classList.remove("active"))});const a=document.querySelectorAll("input[name=sex]:checked"),i=document.querySelectorAll("input[name=residency]:checked"),o=document.querySelectorAll("input[name=disabled]:checked");if(a.length===0?(document.getElementById("sex-radio-error").classList.add("active"),s=!1):document.getElementById("sex-radio-error").classList.remove("active"),i.length===0?(document.getElementById("citizen-radio-error").classList.add("active"),s=!1):document.getElementById("citizen-radio-error").classList.remove("active"),o.length===0?(document.getElementById("disabled-radio-error").classList.add("active"),s=!1):document.getElementById("disabled-radio-error").classList.remove("active"),document.getElementById("ssn").value.length!==11?(s=!1,document.getElementById("ssn-error").classList.add("active")):document.getElementById("ssn-error").classList.remove("active"),t===1){const r=document.getElementById("email");if(!r.required)return;/\S+@\S+\.\S+/.test(r.value)?r.nextElementSibling.classList.remove("active"):(s=!1,r.nextElementSibling.classList.add("active"));const d=document.getElementById("dayphone"),f=document.getElementById("EmerContactPhone");d.value.length!==16?(s=!1,d.nextElementSibling.classList.add("active")):d.nextElementSibling.classList.remove("active"),f.value.length!==16?(s=!1,f.nextElementSibling.classList.add("active")):f.nextElementSibling.classList.remove("active");const h=document.getElementById("zip");h.value.length!==5?(s=!1,h.nextElementSibling.classList.add("active")):h.nextElementSibling.classList.remove("active");const p=document.getElementById("patientAddress");q(p.value)===!1?(s=!1,p.nextElementSibling.classList.add("active")):p.nextElementSibling.classList.remove("active")}if(t===2){const r=document.getElementById("doc-email"),l=document.getElementById("doc2-email-2");if(!r.required)return;const d=/\S+@\S+\.\S+/;d.test(r.value)?r.nextElementSibling.classList.remove("active"):(s=!1,r.nextElementSibling.classList.add("active")),l.value!==""?d.test(l.value)||(s=!1,l.nextElementSibling.classList.add("active")):l.nextElementSibling.classList.remove("active");const f=document.getElementById("doc-officephone-2"),h=document.getElementById("doc-fax"),p=document.getElementById("doc2-officephone-2"),w=document.getElementById("doc2-fax-2");f.value.length!==16?(s=!1,f.nextElementSibling.classList.add("active")):f.nextElementSibling.classList.remove("active"),h.value.length!==16?(s=!1,h.nextElementSibling.classList.add("active")):h.nextElementSibling.classList.remove("active"),p.value!==""&&(p.value.length!==16?(s=!1,p.nextElementSibling.classList.add("active")):p.nextElementSibling.classList.remove("active")),w.value!==""&&(w.value.length!==16?(s=!1,w.nextElementSibling.classList.add("active")):w.nextElementSibling.classList.remove("active"));const L=document.getElementById("doctorAddress");q(L.value)===!1?(s=!1,L.nextElementSibling.classList.add("active")):L.nextElementSibling.classList.remove("active");const S=document.getElementById("doctor2Address");S.value!==""&&(q(S.value)===!1?(s=!1,S.nextElementSibling.classList.add("active")):S.nextElementSibling.classList.remove("active"));const I=document.getElementById("doc-zip-2"),E=document.getElementById("doc2-zip-2");I.value.length!==5?(s=!1,I.nextElementSibling.classList.add("active")):I.nextElementSibling.classList.remove("active"),E.value!==""&&(E.value.length!==5?(s=!1,E.nextElementSibling.classList.add("active")):E.nextElementSibling.classList.remove("active"))}return s}const ae=document.querySelectorAll(".phone-field");function ie(n){n.addEventListener("input",function(){this.value=this.value.replace(/\D/g,"");const e=this.value.replace(/\D/g,"").substring(0,10),t=e.substring(0,3),s=e.substring(3,6),a=e.substring(6,10);e.length>6?this.value=`(${t}) ${s} - ${a}`:e.length>3?this.value=`(${t}) ${s}`:e.length>0&&(this.value=`(${t}`)})}ae.forEach(n=>{ie(n)});const re=document.querySelectorAll('input[placeholder="Zip code"]');re.forEach(n=>{n.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value.length>5&&(this.value=this.value.slice(0,5))})});function oe(n){return n.replace(/\D/g,"").replace(/^(\d{3})(\d{2})(\d{0,4})$/,(s,a,i,o)=>o?`${a}-${i}-${o}`:i?`${a}-${i}`:a)}const ce=document.getElementById("ssn");ce.addEventListener("input",function(){this.value=oe(this.value)});function q(n){return/^[^,]+,\s*[^,]+,\s*[A-Z]{2},\s*USA$/.test(n)}const le=document.querySelector(".money-field");le.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value!==""&&(this.value="$"+this.value)});const T=document.querySelector(".progress-bar-c"),de=document.querySelector(".progress-bar"),ue={attributes:!0};function me(n){n.forEach(function(e){if(e.type==="attributes"&&e.attributeName==="class"){let t=Array.from(A).findIndex(s=>s.classList.contains("current"));de.style.width=`${(t+1)/A.length*100}%`,window.innerWidth<768&&(t===2?T.style.transform=`translateX(-${516-window.innerWidth}px)`:t<2&&(T.style.transform="translateX(0px)"))}})}let pe=new MutationObserver(me);A.forEach(n=>{pe.observe(n,ue)});const fe=document.querySelectorAll(".doc-content-c-tab"),he=document.querySelectorAll(".doc-content-w"),ge=document.querySelectorAll(".tab-minus-icon"),ye=document.querySelectorAll(".tab-plus-icon");fe.forEach(n=>{n.addEventListener("click",()=>{he.forEach(e=>{e.classList.remove("active"),e.parentElement===n&&e.classList.add("active")}),ge.forEach(e=>{e.classList.remove("active"),n.querySelector(".tab-minus-icon")===e&&e.classList.add("active")}),ye.forEach(e=>{e.classList.remove("active"),n.querySelector(".tab-plus-icon")!==e&&e.classList.add("active")})})});const v=document.getElementById("medicationStep"),ve=v==null?void 0:v.querySelector(".form-row-wrapper"),P=document.getElementById("addMed");P.addEventListener("click",()=>{var e,t;const n=ve.cloneNode(!0);v.insertBefore(n,P.parentElement),(e=n.querySelector(".flex-grow:nth-child(1) > select"))==null||e.removeAttribute("required"),(t=n.querySelector(".flex-grow:nth-child(4) > input"))==null||t.removeAttribute("required"),n.querySelector(".flex-grow:nth-child(4) > input").value="",n.querySelector(".flex-grow:nth-child(2) > select").id=`med-name-${v.childElementCount-1}`,n.querySelector(".flex-grow:nth-child(2) > select").value="",n.querySelector(".flex-grow:nth-child(3) > select").id=`med-strength-${v.childElementCount-1}`,n.querySelector(".flex-grow:nth-child(2) > select").addEventListener("change",s=>{var r;n.querySelector(".flex-grow:nth-child(3) > select").innerHTML="";const a=s.target.value.toLocaleLowerCase().split(" ").join("-"),i=(r=document.querySelector(`[cd-name=${a}]`))==null?void 0:r.parentElement,o=i==null?void 0:i.querySelectorAll("[cd=strength]"),c=[];o==null||o.forEach(l=>{const d={strength:l.textContent,webpapId:l.getAttribute("cd-webpap-id")};d.strength!==null&&c.push(d)}),_(n.querySelector(".flex-grow:nth-child(3) > select"),c)})});function be(n){if(n==="")return!1;n===C.find(e=>e===n)?(document.getElementById("insurance-row").classList.remove("hidden"),document.getElementById("insurance-field").required=!0):(document.getElementById("insurance-row").classList.add("hidden"),document.getElementById("insurance-field").required=!1)}for(let n=1;n<4;n++){const e=document.getElementById(`med-name-${n}`),t=document.getElementById(`med-strength-${n}`);e.addEventListener("change",s=>{var r;t.innerHTML="";const a=s.target.value.toLocaleLowerCase().replace(/[\(\)\/.]/g,"").split(" ").join("-"),i=(r=document.querySelector(`[cd-name=${a}]`))==null?void 0:r.parentElement,o=i==null?void 0:i.querySelectorAll("[cd=strength]"),c=[];o==null||o.forEach(l=>{const d={strength:l.textContent,webpapId:l.getAttribute("cd-webpap-id")};d.strength!==null&&c.push(d)}),_(t,c),be(s.target.value)})}function we(n){document.querySelectorAll("[cd=drug]").forEach(t=>{const s=document.createElement("option"),a=t.textContent,i=t.getAttribute("cd-webpap-name"),o=t.getAttribute("cd-program"),c=t.getAttribute("cd-diagnosis"),r=t.getAttribute("cd-webpap-id");a!==null&&(s.text=a,s.value=a,s.setAttribute("cd-webpap-name",i),s.setAttribute("cd-program",o),s.setAttribute("cd-diagnosis",c),s.setAttribute("cd-webpap-id",r),n.add(s))})}function _(n,e){if(e.length>9){n.innerHTML="";const a=document.createElement("option");a.text="Select Medication First",a.value="",n.add(a);return}n.removeAttribute("disabled"),n.classList.remove("disabled"),n.innerHTML="";const t=document.createElement("option");t.text="Select Medication First",t.value="",n.add(t);let s=!0;e.forEach(a=>{if(a.strength==="")return;s=!1;const i=document.createElement("option");i.text=a.strength,i.value=a.strength,i.setAttribute("cd-webpap-id",a.webpapId),n.add(i)}),s&&(n.setAttribute("disabled","true"),n.classList.add("disabled"),n.removeAttribute("required"))}(function(){window.AuthorizeNetIFrame||(window.AuthorizeNetIFrame={}),AuthorizeNetIFrame.onReceiveCommunication=function(e){var t=n(e);switch(t.action){case"resizeWindow":break;case"successfulSave":break;case"cancel":break;case"transactResponse":var s=JSON.parse(t.response);s.responseCode==="1"&&z()}};function n(e){for(var t=[],s=e.split("&"),a,i=0;i<s.length;i++)a=s[i].split("="),t.push(a[0]),t[a[0]]=unescape(a[1]);return t}})();let $="";async function Se(n,e){try{const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Network response was not ok");$=(await t.json()).token,document.querySelector("input[name=token]").value=$}catch(t){console.log(t)}}const Ee={getHostedPaymentPageRequest:{merchantAuthentication:{name:"9QRrX47T4DkY",transactionKey:"5GN3E8m559X9pdSf"},transactionRequest:{transactionType:"authCaptureTransaction",amount:"200.00"},hostedPaymentSettings:{setting:[{settingName:"hostedPaymentReturnOptions",settingValue:'{"showReceipt": false, "url": "https://www.transparentpricerx.com", "urlText": "Continue", "cancelUrl": "https://www.transparentpricerx.com", "cancelUrlText": "Cancel"}'},{settingName:"hostedPaymentButtonOptions",settingValue:'{"text": "Pay"}'},{settingName:"hostedPaymentStyleOptions",settingValue:'{"bgColor": "blue"}'},{settingName:"hostedPaymentPaymentOptions",settingValue:'{"cardCodeRequired": false, "showCreditCard": true, "showBankAccount": true}'},{settingName:"hostedPaymentSecurityOptions",settingValue:'{"captcha": false}'},{settingName:"hostedPaymentShippingAddressOptions",settingValue:'{"show": false, "required": false}'},{settingName:"hostedPaymentBillingAddressOptions",settingValue:'{"show": true, "required": true}'},{settingName:"hostedPaymentCustomerOptions",settingValue:'{"showEmail": true, "requiredEmail": true, "addPaymentProfile": true}'},{settingName:"hostedPaymentOrderOptions",settingValue:'{"show": false, "merchantName": "TrasnaparentPrice RX"}'},{settingName:"hostedPaymentIFrameCommunicatorUrl",settingValue:'{"url": "https://www.transparentpricerx.com/communicator"}'}]}}};Se("https://api.authorize.net/xml/v1/request.api",Ee);window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsload",n=>{const[e]=n;for(let t=1;t<4;t++)we(document.getElementById(`med-name-${t}`));e.on("renderitems",t=>{console.log(t)})}]);document.querySelector(".navbar-container").addEventListener("click",()=>{D()});
