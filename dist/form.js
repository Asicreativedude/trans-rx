const l={fname:"",lname:"",mname:"",dob:"",ssn:"",address:"",city:"",state:"",zip:"",email:"",marital:"",residency:"",employed:"",sex:"",disabled:"",numinhouse:"",EmerContactName:"",EmerContactPhone1:""},b={patwages:"",patdisab:"",patunemploy:""},f={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:""},L=document.querySelector('[cd="submit-data"]');let w=0,g="";const I="https://www.medserviceswebpap.com/api/patient/createpatient",x="https://www.medserviceswebpap.com/api/physician/createphysician",k="https://www.medserviceswebpap.com/auth/token?hcpid=89",A={grant_type:"password",username:"apiuser",password:"123456"};async function q(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t).toString()});if(!n.ok)throw new Error(n.statusText);return n.json()}async function B(e,t){try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(t)});if(!n.ok)throw new Error("Network response was not ok");await n.json()}catch(n){console.log(n)}}async function $(e,t){try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(t)});if(!n.ok)throw new Error("Network response was not ok");w=(await n.json()).Id}catch(n){console.log(n)}}async function _(e,t){try{if(!(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(t)})).ok)throw new Error("Network response was not ok")}catch(n){console.log(n)}}L.addEventListener("click",()=>{patientAddress&&patientAddress.forEach(e=>{switch(e.types[0]){case"street_number":{l.address=`${e.long_name} `;break}case"route":{l.address+=e.short_name;break}case"locality":l.city=e.long_name;break;case"administrative_area_level_1":{l.state=e.short_name;break}}}),doctorAddress&&doctorAddress.forEach(e=>{switch(e.types[0]){case"street_number":{f.address=`${e.long_name} `;break}case"route":{f.address+=e.short_name;break}case"locality":f.city=e.long_name;break;case"administrative_area_level_1":{f.state=e.short_name;break}}}),all_data.forEach(e=>{if(e.field==="patwages"||e.field==="patdisab"||e.field==="patunemploy"){b[e.field]=e.value;return}if(e.field.includes("doc-")){let t=e.field.split("-")[1];f[t]=e.value;return}if(e.field==="month"){l.dob=`${e.value}`;return}if(e.field==="day"||e.field==="year"){l.dob=`${l.dob}/${e.value}`;return}if(e.field==="residency"||e.field==="disabled"){l[e.field]=e.value==="Yes"?"true":"false";return}if(e.field==="ssn"){l[e.field]=e.value.replace(/-/g,"");return}l[e.field]=e.value}),q(k,A).then(e=>{g=e.access_token,$(I,l).then(()=>{let t=`https://www.medserviceswebpap.com/api/patient/updatepatientincome?patientId=${w}`;_(t,b)}),B(x,f)})});window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsload",e=>{const[t]=e;for(let n=1;n<4;n++)W(document.getElementById(`med-name-${n}`));t.on("renderitems",n=>{console.log(n)})}]);const T=document.getElementById("year"),N=105;for(let e=N;e>0;e--){const t=document.createElement("option");t.text=`${e+1900}`,t.value=`${e+1900}`,T.add(t)}function D(e,t,n,s){let i=0;t.style.display="none";const c=e.length;e.forEach((a,r)=>{r!==i&&(a.style.display="none")}),t.addEventListener("click",()=>{i>0&&(e[i].style.display="none",i--,e[i].style.display="block"),s.forEach((a,r)=>{r!==i?a.classList.remove("current"):a.classList.add("current")}),i===0?t.style.display="none":t.style.display="block"}),n.addEventListener("click",()=>{const a=e[i].querySelectorAll("input"),r=e[i].querySelectorAll("select");if(C(a,r,i))i<c-1&&(e[i].style.display="none",i++,e[i].style.display="block"),s.forEach((o,d)=>{d!==i?o.classList.remove("current"):o.classList.add("current")}),i===0?t.style.display="none":t.style.display="block";else return})}const O=document.querySelectorAll("[cd-form = step]"),M=document.querySelector("[cd-form = button-back]"),z=document.querySelector("[cd-form = button-next]"),y=document.querySelectorAll("[cd-form=progress-indicator]");D(O,M,z,y);function C(e,t,n){let s=!0;e.forEach(o=>{o.required&&(o.value===""?(s=!1,o.nextElementSibling.classList.add("active")):o.nextElementSibling.classList.remove("active"))}),t.forEach(o=>{o.required&&(o.value===""?(s=!1,o.nextElementSibling.classList.add("active")):o.nextElementSibling.classList.remove("active"))});const i=document.querySelectorAll("input[name=sex]:checked"),c=document.querySelectorAll("input[name=residency]:checked"),a=document.querySelectorAll("input[name=disabled]:checked");if(i.length===0?(document.getElementById("sex-radio-error").classList.add("active"),s=!1):document.getElementById("sex-radio-error").classList.remove("active"),c.length===0?(document.getElementById("citizen-radio-error").classList.add("active"),s=!1):document.getElementById("citizen-radio-error").classList.remove("active"),a.length===0?(document.getElementById("disabled-radio-error").classList.add("active"),s=!1):document.getElementById("disabled-radio-error").classList.remove("active"),document.getElementById("ssn").value.length!==11?(s=!1,document.getElementById("ssn-error").classList.add("active")):document.getElementById("ssn-error").classList.remove("active"),n===1){const o=document.getElementById("email");if(!o.required)return;/\S+@\S+\.\S+/.test(o.value)?o.nextElementSibling.classList.remove("active"):(s=!1,o.nextElementSibling.classList.add("active"));const u=document.getElementById("dayphone"),m=document.getElementById("EmerContactPhone");u.value.length!==10?(s=!1,u.nextElementSibling.classList.add("active")):u.nextElementSibling.classList.remove("active"),m.value.length!==10?(s=!1,m.nextElementSibling.classList.add("active")):m.nextElementSibling.classList.remove("active")}if(n===2){const o=document.getElementById("doc-email"),d=document.getElementById("doc2-email");if(!o.required)return;const u=/\S+@\S+\.\S+/;u.test(o.value)?o.nextElementSibling.classList.remove("active"):(s=!1,o.nextElementSibling.classList.add("active")),d.value!==""?u.test(d.value)||(s=!1,d.nextElementSibling.classList.add("active")):d.nextElementSibling.classList.remove("active");const m=document.getElementById("doc-officephone-2"),E=document.getElementById("doc-fax"),p=document.getElementById("doc2-officephone-2"),v=document.getElementById("doc2-fax");m.value.length!==10?(s=!1,m.nextElementSibling.classList.add("active")):m.nextElementSibling.classList.remove("active"),E.value.length!==10?(s=!1,E.nextElementSibling.classList.add("active")):E.nextElementSibling.classList.remove("active"),p.value!==""&&(p.value.length!==10?(s=!1,p.nextElementSibling.classList.add("active")):p.nextElementSibling.classList.remove("active")),v.value!==""&&(v.value.length!==10?(s=!1,v.nextElementSibling.classList.add("active")):v.nextElementSibling.classList.remove("active"))}return s}const R=document.querySelectorAll(".phone-field"),j=document.querySelectorAll('input[placeholder="Zip code"]');R.forEach(e=>{e.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value.length>10&&(this.value=this.value.slice(0,10))})});j.forEach(e=>{e.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value.length>5&&(this.value=this.value.slice(0,5))})});function P(e){return e.replace(/\D/g,"").replace(/^(\d{3})(\d{2})(\d{0,4})$/,(s,i,c,a)=>a?`${i}-${c}-${a}`:c?`${i}-${c}`:i)}const F=document.getElementById("ssn");F.addEventListener("input",function(){this.value=P(this.value)});const J=document.querySelectorAll(".money-field");J.forEach(e=>{e.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value!==""&&(this.value="$"+this.value)})});const U=document.querySelector(".progress-bar"),H={attributes:!0};function Y(e){e.forEach(function(t){if(t.type==="attributes"&&t.attributeName==="class"){let n=Array.from(y).findIndex(s=>s.classList.contains("current"));U.style.width=`${(n+1)/y.length*100}%`}})}let Z=new MutationObserver(Y);y.forEach(e=>{Z.observe(e,H)});const G=document.querySelectorAll(".doc-content-c-tab"),K=document.querySelectorAll(".doc-content-w"),Q=document.querySelectorAll(".tab-minus-icon"),V=document.querySelectorAll(".tab-plus-icon");G.forEach(e=>{e.addEventListener("click",()=>{K.forEach(t=>{t.classList.remove("active"),t.parentElement===e&&t.classList.add("active")}),Q.forEach(t=>{t.classList.remove("active"),e.querySelector(".tab-minus-icon")===t&&t.classList.add("active")}),V.forEach(t=>{t.classList.remove("active"),e.querySelector(".tab-plus-icon")!==t&&t.classList.add("active")})})});const h=document.getElementById("medicationStep"),X=h==null?void 0:h.querySelector(".form-row-wrapper"),S=document.getElementById("addMed");S.addEventListener("click",()=>{const e=X.cloneNode(!0);h.insertBefore(e,S.parentElement)});for(let e=1;e<4;e++){const t=document.getElementById(`med-name-${e}`),n=document.getElementById(`med-strength-${e}`);t.addEventListener("change",s=>{var o;n.innerHTML="";const i=s.target.value.toLocaleLowerCase().split(" ").join("-"),c=(o=document.querySelector(`[cd-name=${i}]`))==null?void 0:o.parentElement,a=c==null?void 0:c.querySelectorAll("[cd=strength]"),r=[];a==null||a.forEach(d=>{const u=d.textContent;u!==null&&r.push(u)}),ee(n,r)})}function W(e){document.querySelectorAll("[cd=drug]").forEach(n=>{const s=document.createElement("option"),i=n.textContent;i!==null&&(s.text=i,s.value=i,s.setAttribute("cd",i),e.add(s))})}function ee(e,t){if(t.length>9){e.innerHTML="";const s=document.createElement("option");s.text="Select Medication First",s.value="",e.add(s);return}e.innerHTML="";const n=document.createElement("option");n.text="Select Medication First",n.value="",e.add(n),t.forEach(s=>{if(s==="")return;const i=document.createElement("option");i.text=s,i.value=s,e.add(i)})}
