const u={fname:"",lname:"",mname:"",dob:"",ssn:"",address:"",city:"",state:"",zip:"",email:"",marital:"",residency:"",employed:"",sex:"",disabled:"",numinhouse:"",EmerContactName:"",EmerContactPhone1:""},w={patwages:"",patdisab:"",patunemploy:""},p={fname:"",mname:"",lname:"",email:"",phone:"",fax:"",address:"",city:"",state:"",zip:""},I=document.querySelector('[cd="submit-data"]');let q=0,E="";const A="https://www.medserviceswebpap.com/api/patient/createpatient",B="https://www.medserviceswebpap.com/api/physician/createphysician",N="https://www.medserviceswebpap.com/auth/token?hcpid=89",C={grant_type:"password",username:"apiuser",password:"123456"};async function T(t,e){const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});if(!n.ok)throw new Error(n.statusText);return n.json()}async function O(t,e){try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");await n.json()}catch(n){console.log(n)}}async function P(t,e){try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");q=(await n.json()).Id}catch(n){console.log(n)}}async function $(t,e){try{if(!(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify(e)})).ok)throw new Error("Network response was not ok")}catch(n){console.log(n)}}I.addEventListener("click",()=>{patientAddress&&patientAddress.forEach(e=>{switch(e.types[0]){case"street_number":{u.address=`${e.long_name} `;break}case"route":{u.address+=e.short_name;break}case"locality":u.city=e.long_name;break;case"administrative_area_level_1":{u.state=e.short_name;break}}}),doctorAddress&&doctorAddress.forEach(e=>{switch(e.types[0]){case"street_number":{p.address=`${e.long_name} `;break}case"route":{p.address+=e.short_name;break}case"locality":p.city=e.long_name;break;case"administrative_area_level_1":{p.state=e.short_name;break}}});const t=[];document.querySelectorAll(".input-field").forEach(e=>{let n=e.id,s=e.value;t.push({field:n,value:s})}),document.querySelectorAll("input[type=radio]:checked").forEach(e=>{let n=e.name,s=e.id;t.push({field:n,value:s})}),t.forEach(e=>{if(e.field==="patwages"||e.field==="patdisab"||e.field==="patunemploy"){w[e.field]=e.value.slice(1);return}if(e.field.includes("doc-")){let n=e.field.split("-")[1];p[n]=e.value;return}if(e.field==="month"){u.dob=`${e.value}`;return}if(e.field==="day"||e.field==="year"){u.dob=`${u.dob}/${e.value}`;return}if(e.field==="residency"||e.field==="disabled"){u[e.field]=e.value==="Yes"?"true":"false";return}if(e.field==="ssn"){u[e.field]=e.value.replace(/-/g,"");return}u[e.field]=e.value}),T(N,C).then(e=>{E=e.access_token,P(A,u).then(()=>{let n=`https://www.medserviceswebpap.com/api/patient/updatepatientincome?patientId=${q}`;$(n,w)}),O(B,p)})});window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsload",t=>{const[e]=t;for(let n=1;n<4;n++)se(document.getElementById(`med-name-${n}`));e.on("renderitems",n=>{console.log(n)})}]);const z=document.getElementById("year"),_=105;for(let t=_;t>0;t--){const e=document.createElement("option");e.text=`${t+1900}`,e.value=`${t+1900}`,z.add(e)}function D(t,e,n,s){let i=0;e.style.display="none";const a=t.length;t.forEach((l,r)=>{r!==i&&(l.style.display="none")}),e.addEventListener("click",()=>{i>0&&(t[i].style.display="none",i--,t[i].style.display="block"),s.forEach((l,r)=>{r!==i?l.classList.remove("current"):l.classList.add("current")}),i===0?e.style.display="none":e.style.display="block"}),n.addEventListener("click",()=>{if(i===4){document.querySelector(".payment-trigger").click();return}const l=t[i].querySelectorAll("input"),r=t[i].querySelectorAll("select");if(j(l,r,i))i<a-1&&(t[i].style.display="none",i++,t[i].style.display="block"),s.forEach((o,c)=>{c!==i?o.classList.remove("current"):o.classList.add("current")}),i===0?e.style.display="none":e.style.display="block",i===4&&(n.innerHTML="Continue To Payment");else return})}const R=document.querySelectorAll("[cd-form = step]"),M=document.querySelector("[cd-form = button-back]"),F=document.querySelector("[cd-form = button-next]"),S=document.querySelectorAll("[cd-form=progress-indicator]");D(R,M,F,S);function j(t,e,n){let s=!0;t.forEach(o=>{o.required&&(o.value===""?(s=!1,o.nextElementSibling.classList.add("active")):o.nextElementSibling.classList.remove("active"))}),e.forEach(o=>{o.required&&(o.value===""?(s=!1,o.nextElementSibling.classList.add("active")):o.nextElementSibling.classList.remove("active"))});const i=document.querySelectorAll("input[name=sex]:checked"),a=document.querySelectorAll("input[name=residency]:checked"),l=document.querySelectorAll("input[name=disabled]:checked");if(i.length===0?(document.getElementById("sex-radio-error").classList.add("active"),s=!1):document.getElementById("sex-radio-error").classList.remove("active"),a.length===0?(document.getElementById("citizen-radio-error").classList.add("active"),s=!1):document.getElementById("citizen-radio-error").classList.remove("active"),l.length===0?(document.getElementById("disabled-radio-error").classList.add("active"),s=!1):document.getElementById("disabled-radio-error").classList.remove("active"),document.getElementById("ssn").value.length!==11?(s=!1,document.getElementById("ssn-error").classList.add("active")):document.getElementById("ssn-error").classList.remove("active"),n===1){const o=document.getElementById("email");if(!o.required)return;/\S+@\S+\.\S+/.test(o.value)?o.nextElementSibling.classList.remove("active"):(s=!1,o.nextElementSibling.classList.add("active"));const d=document.getElementById("dayphone"),m=document.getElementById("EmerContactPhone");d.value.length!==10?(s=!1,d.nextElementSibling.classList.add("active")):d.nextElementSibling.classList.remove("active"),m.value.length!==10?(s=!1,m.nextElementSibling.classList.add("active")):m.nextElementSibling.classList.remove("active");const f=document.getElementById("zip");f.value.length!==5?(s=!1,f.nextElementSibling.classList.add("active")):f.nextElementSibling.classList.remove("active")}if(n===2){const o=document.getElementById("doc-email"),c=document.getElementById("doc2-email-2");if(!o.required)return;const d=/\S+@\S+\.\S+/;d.test(o.value)?o.nextElementSibling.classList.remove("active"):(s=!1,o.nextElementSibling.classList.add("active")),c.value!==""?d.test(c.value)||(s=!1,c.nextElementSibling.classList.add("active")):c.nextElementSibling.classList.remove("active");const m=document.getElementById("doc-officephone-2"),f=document.getElementById("doc-fax"),y=document.getElementById("doc2-officephone-2"),v=document.getElementById("doc2-fax-2");m.value.length!==10?(s=!1,m.nextElementSibling.classList.add("active")):m.nextElementSibling.classList.remove("active"),f.value.length!==10?(s=!1,f.nextElementSibling.classList.add("active")):f.nextElementSibling.classList.remove("active"),y.value!==""&&(y.value.length!==10?(s=!1,y.nextElementSibling.classList.add("active")):y.nextElementSibling.classList.remove("active")),v.value!==""&&(v.value.length!==10?(s=!1,v.nextElementSibling.classList.add("active")):v.nextElementSibling.classList.remove("active"));const b=document.getElementById("doc-zip-2"),g=document.getElementById("doc2-zip-2");b.value.length!==5?(s=!1,b.nextElementSibling.classList.add("active")):b.nextElementSibling.classList.remove("active"),g.value!==""&&(g.value.length!==5?(s=!1,g.nextElementSibling.classList.add("active")):g.nextElementSibling.classList.remove("active"))}return n===4&&document.querySelectorAll(".money-field").forEach(c=>{c.value!==""?document.getElementById("income-error").classList.remove("active"):(s=!1,document.getElementById("income-error").classList.add("active"))}),s}const V=document.querySelectorAll(".phone-field"),U=document.querySelectorAll('input[placeholder="Zip code"]');V.forEach(t=>{t.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value.length>10&&(this.value=this.value.slice(0,10))})});U.forEach(t=>{t.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value.length>5&&(this.value=this.value.slice(0,5))})});function J(t){return t.replace(/\D/g,"").replace(/^(\d{3})(\d{2})(\d{0,4})$/,(s,i,a,l)=>l?`${i}-${a}-${l}`:a?`${i}-${a}`:i)}const H=document.getElementById("ssn");H.addEventListener("input",function(){this.value=J(this.value)});const Q=document.querySelectorAll(".money-field");Q.forEach(t=>{t.addEventListener("input",function(){this.value=this.value.replace(/\D/g,""),this.value!==""&&(this.value="$"+this.value)})});const G=document.querySelector(".progress-bar"),X={attributes:!0};function Y(t){t.forEach(function(e){if(e.type==="attributes"&&e.attributeName==="class"){let n=Array.from(S).findIndex(s=>s.classList.contains("current"));G.style.width=`${(n+1)/S.length*100}%`}})}let K=new MutationObserver(Y);S.forEach(t=>{K.observe(t,X)});const Z=document.querySelectorAll(".doc-content-c-tab"),W=document.querySelectorAll(".doc-content-w"),ee=document.querySelectorAll(".tab-minus-icon"),te=document.querySelectorAll(".tab-plus-icon");Z.forEach(t=>{t.addEventListener("click",()=>{W.forEach(e=>{e.classList.remove("active"),e.parentElement===t&&e.classList.add("active")}),ee.forEach(e=>{e.classList.remove("active"),t.querySelector(".tab-minus-icon")===e&&e.classList.add("active")}),te.forEach(e=>{e.classList.remove("active"),t.querySelector(".tab-plus-icon")!==e&&e.classList.add("active")})})});const h=document.getElementById("medicationStep"),ne=h==null?void 0:h.querySelector(".form-row-wrapper"),L=document.getElementById("addMed");L.addEventListener("click",()=>{var e,n;const t=ne.cloneNode(!0);h.insertBefore(t,L.parentElement),(e=t.querySelector(".flex-grow:nth-child(1) > select"))==null||e.removeAttribute("required"),(n=t.querySelector(".flex-grow:nth-child(4) > input"))==null||n.removeAttribute("required"),t.querySelector(".flex-grow:nth-child(4) > input").value="",t.querySelector(".flex-grow:nth-child(2) > select").id=`med-name-${h.childElementCount-1}`,t.querySelector(".flex-grow:nth-child(2) > select").value="",t.querySelector(".flex-grow:nth-child(3) > select").id=`med-strength-${h.childElementCount-1}`,t.querySelector(".flex-grow:nth-child(2) > select").addEventListener("change",s=>{var o;t.querySelector(".flex-grow:nth-child(3) > select").innerHTML="";const i=s.target.value.toLocaleLowerCase().split(" ").join("-"),a=(o=document.querySelector(`[cd-name=${i}]`))==null?void 0:o.parentElement,l=a==null?void 0:a.querySelectorAll("[cd=strength]"),r=[];l==null||l.forEach(c=>{const d=c.textContent;d!==null&&r.push(d)}),k(t.querySelector(".flex-grow:nth-child(3) > select"),r)})});for(let t=1;t<4;t++){const e=document.getElementById(`med-name-${t}`),n=document.getElementById(`med-strength-${t}`);e.addEventListener("change",s=>{var o;n.innerHTML="";const i=s.target.value.toLocaleLowerCase().replace(/[\(\)\/]/g,"").split(" ").join("-"),a=(o=document.querySelector(`[cd-name=${i}]`))==null?void 0:o.parentElement,l=a==null?void 0:a.querySelectorAll("[cd=strength]"),r=[];l==null||l.forEach(c=>{const d=c.textContent;d!==null&&r.push(d)}),k(n,r)})}function se(t){document.querySelectorAll("[cd=drug]").forEach(n=>{const s=document.createElement("option"),i=n.textContent;i!==null&&(s.text=i,s.value=i,s.setAttribute("cd",i),t.add(s))})}function k(t,e){if(e.length>9){t.innerHTML="";const i=document.createElement("option");i.text="Select Medication First",i.value="",t.add(i);return}t.removeAttribute("disabled"),t.classList.remove("disabled"),t.innerHTML="";const n=document.createElement("option");n.text="Select Medication First",n.value="",t.add(n);let s=!0;e.forEach(i=>{if(i==="")return;s=!1;const a=document.createElement("option");a.text=i,a.value=i,t.add(a)}),s&&(t.setAttribute("disabled","true"),t.classList.add("disabled"))}(function(){window.AuthorizeNetIFrame||(window.AuthorizeNetIFrame={}),AuthorizeNetIFrame.onReceiveCommunication=function(e){var n=t(e);switch(console.log(n),n.action){case"resizeWindow":break;case"successfulSave":break;case"cancel":break;case"transactResponse":var s=JSON.parse(n.response);console.log(s),s.responseCode==="1"&&(document.querySelector(".thank-you-trigger").click(),I.click(),document.querySelector(".submit-btn").click())}};function t(e){for(var n=[],s=e.split("&"),i,a=0;a<s.length;a++)i=s[a].split("="),n.push(i[0]),n[i[0]]=unescape(i[1]);return n}})();let x="";async function ie(t,e){try{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Network response was not ok");x=(await n.json()).token,document.querySelector("input[name=token]").value=x}catch(n){console.log(n)}}const oe={getHostedPaymentPageRequest:{merchantAuthentication:{name:"9QRrX47T4DkY",transactionKey:"5GN3E8m559X9pdSf"},transactionRequest:{transactionType:"authCaptureTransaction",amount:"200.00"},hostedPaymentSettings:{setting:[{settingName:"hostedPaymentReturnOptions",settingValue:'{"showReceipt": false, "url": "https://www.transparentpricerx.com", "urlText": "Continue", "cancelUrl": "https://mysite.com/cancel", "cancelUrlText": "Cancel"}'},{settingName:"hostedPaymentButtonOptions",settingValue:'{"text": "Pay"}'},{settingName:"hostedPaymentStyleOptions",settingValue:'{"bgColor": "blue"}'},{settingName:"hostedPaymentPaymentOptions",settingValue:'{"cardCodeRequired": false, "showCreditCard": true, "showBankAccount": true}'},{settingName:"hostedPaymentSecurityOptions",settingValue:'{"captcha": false}'},{settingName:"hostedPaymentShippingAddressOptions",settingValue:'{"show": false, "required": false}'},{settingName:"hostedPaymentBillingAddressOptions",settingValue:'{"show": true, "required": true}'},{settingName:"hostedPaymentCustomerOptions",settingValue:'{"showEmail": true, "requiredEmail": true, "addPaymentProfile": true}'},{settingName:"hostedPaymentOrderOptions",settingValue:'{"show": true, "merchantName": "G and S Questions Inc."}'},{settingName:"hostedPaymentIFrameCommunicatorUrl",settingValue:'{"url": "https://www.transparentpricerx.com/communicator"}'}]}}};ie("https://api.authorize.net/xml/v1/request.api",oe);document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.getElementById("btnOpenAuthorizeNetIFrame").click()},1e3)});
